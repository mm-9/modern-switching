
第四讲 电话呼叫处理原理 与程控交换机控制系统


![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-01.jpg?height=794&width=1175&top_left_y=916&top_left_x=434)

授课：陈科文

中南大学自动化学院

《 第四讲 电话呼叫处理原理 与程控交换机控制系统 》 

本讲将要回答的问题

- 电话呼叫处理过程包含哪些操作?

- 呼叫控制功能是如何实现的?

- 程控交换机的控制系统有什么特点?

- 程控交换机控制系统包含哪些软硬件?

- 控制系统的软硬件设计采用了什么技术? 

本讲主要内容

-.电话呼叫处理原理(重点)

=.程控交换机控制系统的硬件

三.程控交换机控制系统的软件

本讲小结 

一、电话呼叫处理原理

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-04.jpg?height=1082&width=2447&top_left_y=835&top_left_x=235)


![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-05.jpg?height=1506&width=2396&top_left_y=269&top_left_x=282)

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-05.jpg?height=75&width=1208&top_left_y=1816&top_left_x=884)



1 电话呼叫处理基本过程

正常呼叫处理一般可分为如下几个阶段:

(1)用户摘机呼叫

(2-4)送拨号音、收号、号码分析

(5) 呼叫连接建立 (接续)

(6)通话(传输用户话音数据)

(7) 呼叫释放 (拆线)

呼叫处理过程也可以通过 “呼叫信令传送过程”反映出来。



本局电话接续信令过程(举例)

主叫 $\mathbf{A}$

被叫B

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-07.jpg?height=1314&width=1541&top_left_y=499&top_left_x=822)



局间电话接续信令过程(举例)

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-08.jpg?height=1500&width=1951&top_left_y=395&top_left_x=561)



(1)． 主叫A摘机呼叫

- 交换机检测到用户A摘机状态;

- 交换机检查A的用户类别(一般电话、投币电话、 同线电话、小交换机PBX、优先呼叫用户等)

- 检测A的话机类别(按键话机/双音多频话机、号 盘话机/脉冲拔号话机) 

(2).送拨号音, 准备收号

- 寻找空闲的收号器和收号路由;

- 寻找信号音传送路由, 向主旪A送拨号音;

- 监视用户A和收号器的状态, 准备收号。

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-10.jpg?height=716&width=1578&top_left_y=1044&top_left_x=509)



(3).收号

- 由收号器接收用户A所拔号码;

- 收到第一位号后, 停送拨号音;

- 对收到的号码按位存储;

- 对 “已收位” 进行计数;

- 将号首送向分析程序作预译分析。 

(4).号码分析

- 先进行号首分析 (预译), 决定呼叫类别(本局、 出局、长途、特服等) 和应收位数;

- 再将号码翻译成被叫用户线或中继线接口的物理 地址;

- 检查这个呼叫是否允许接通(是否限制用户等);

- 检查被叫用户是否空闲, 若空闲则示忙(防止他 人呼叫)，若忙，则向主叫A送忙音。 

(5).接续和振铃

- 测试并预占空闲的回铃音路由和通话路由;

- 向被叫 $B$ 送铃流, 向主叫 $A$ 送回铃音;

- 监视主叫和被叫用户状态。 

(6)．通话

- 检测到被叫B摘机后, 停送铃流和回铃音;

- 建立A和B用户间的通话路由, 双方通话;

- 启动计费设备, 开始计费;

- 监视主叫和被叫用户状态。 

(7).挂机结束

- 检测到任一方用户挂机后, 路由复原;

- 停止计费;

- 向另一方用户送忙音或催挂音。 

2 呼叫处理原理

参考: 呼叫信令流程

- 呼叫处理过程实际上是一个状态转移过程。

 呼叫状态: 一次呼叫处理可以划分为很多稳定状态, 如 空闲、收号、振铃、通话等;

 状态迁移: 就是程控交换机的呼叫处理进程由一个稳定 状态变化到另一个稳定状态的过程; 在状态迁移过程中 程控交换机需要执行某些任务, 产生相应的动作。

 触发事件: 就是引起状态迁移的原因, 比如: 用户摘挂 机、拨号等交换机外部事件、定时器超时等内部事件。 

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-17.jpg?height=1846&width=2450&top_left_y=69&top_left_x=237)



呼叫处理的状态转移过程

输入处理和输出 处理可合称为设 备处理, 分别采 用扫描和驱动两 种处理方式。

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-18.jpg?height=1193&width=1589&top_left_y=571&top_left_x=1011)



一、输入处理

- 输入处理: 检测发生的呼叫事件, 收集有关 话路设备状态变化或信令数据, 并进行识别、 转换等预处理。

- 输入处理任务包括:

用户线状态扫描监视: 摘挂机识别、脉冲拨号识别( 包括: 拨号脉冲数字的识别、数字位间隔的识别)

 中继器线路信令的扫描识别、No.7信令的接收检测

 号码数字信号的识别和接收(包括: DTMF号码、局间 MFC信令的接收检测)

 操作台的各种信号的接收 

输入处理的要求及方法

- 输入处理程序是靠近硬件的低层软件, 实时性要 求较高, 可采用 “周期性扫描法” 来及时发现外 部事件。

- 采用 “周期性扫描” 完成的典型任务举例:

 用户摘挂机识别

 DTMF收号器状态扫描 用户线

监测(S)

信号

环路断 环路通

扫描时刻

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-21.jpg?height=134&width=1500&top_left_y=455&top_left_x=895)

本次结果

前次结果

状态变化

$\begin{array}{llllllllllllllllllll}1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 1 & 1 & 1 \\ 1 & 1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 1 & 1 \\ 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & 0 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0\end{array}$

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-21.jpg?height=209&width=1764&top_left_y=1149&top_left_x=737)

数字脉冲串

数字脉冲串

周期絑扫描监测 实现 “摘挂机识别”和 “拨号脉冲识别”



二、分析处理(重点)

- 分析处理: 对呼叫事件和相关的数据进行分 析处理, 并确定下一步需要执行何种任务。

- 分析处理任务:

1.去话分析: 分析主叫用户相关的数据

2.号码分析: 对拔号数字进行分析和翻译

3.来话分析: 分析被叫用户相关的数据

4.状态分析: 分析输入事件和当前呼叫状态, 并确 定将要执行何种任务和转移到何种新状态。 

分析处理的类别与功能

硬件变化

(事件)

分析对象(输入信息) 分析任务

输出结果

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-23.jpg?height=266&width=1967&top_left_y=501&top_left_x=445)

去话分析
![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-23.jpg?height=970&width=2056&top_left_y=802&top_left_x=358)

状态分析 

呼叫类别与分析处理

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-24.jpg?height=1567&width=2483&top_left_y=354&top_left_x=228)

《第四讲 电话呼叫处理原理 与程控交换机控制系统 》 

分析处理的要求与方法

- 分析程序是位于高层的基本级程序，对实时性要 求相对较低。

- 一般采用的分析方法是:

$$ 借助表格(单级表或多级表)来实现。

$$ 当数据量较多, 而情况比较复杂时, 常借助多级表格、 并采用逐步展开法来实现。 

基于多级表的分析处理原理

- 当数据量较多时，常借助多级表格, 并采用逐 步展开法来实现比较复杂的分析处理。

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-26.jpg?height=724&width=2010&top_left_y=854&top_left_x=472)



号码分析的基本原理

号码分析包括两个基本步骤:

- 号首分析(预译):

$$ 确定呼叫类别和号码总位数

$$ 分析依据是：电话网的编号方案。

- 号码转换(翻译):

 电话号码 $\rightarrow$ 用户线/中继线接口地址

 本局/入局呼叫: 确定被叫用户线接口;

 出局/转接呼叫：确定路由和出中继接口。

号码分析常用方法:

-查表搜索;

-采用多级表, 逐步展开。 

$$ 号码分析

- 功能: 分析被叫用户号码, 决定接续路由、费率等

- 数据源: 来自话机拨出的号码或从局间接收到的号码

- 分析方法：根据号码查找译码表。

- 分析步骤: 预译处理(分析号首)、对完整号码进行分析

![](https://cdn.mathpix.com/cropped/2023_03_29_00f785a427f755f4765ag-28.jpg?height=653&width=2183&top_left_y=1016&top_left_x=382)

三、输出处理

- 输出处理: 调度资源, 执行任务, 驱动和控 制硬件设备的动作, 实现状态转移。

- 输出处理任务:

1.交换连接㲁制，实现话路的接椟和复原

2.控制发送振铃、测试等控制信号、信号音(如忙 音等)

3.发送No.7公共信道信令, (或随路信令, 如: 局 间线路信令和记发器信令)

4.其它，如: 控制各处理机之间的通信、发送计费 脉冲、 转发拨号数字脉冲 (主要对模拟局发送).

输出处理范例及实现原理

输出处理中典型任务执行原理(举例):
(1)局间路由选择
对于出局/转接呼叫

(2)交换通路选择

$$ 以TST交换网络为例。


电话网固定路由选择原理


- 局间路由选择:

先选直达路由

$$ 再选迂回路由:

- 先选转接局少的较短路由

- 再选转接局多的较长路由

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-01.jpg?height=996&width=1048&top_left_y=770&top_left_x=1550)



电话网固定路由选择的实现原理

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-02.jpg?height=1116&width=1472&top_left_y=482&top_left_x=386)

空闲中继线 链队表

路由系引

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-02.jpg?height=709&width=802&top_left_y=794&top_left_x=1822)

局间呼叫处理过程中的路由选择实现方法



交换通路选择

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-03.jpg?height=985&width=1820&top_left_y=701&top_left_x=597)

TST交换网络的等效空分网络 

交换网络内部通路选择的原理

第1级单元出线 (1-2级间链路) 忙闲状态表

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-04.jpg?height=608&width=1383&top_left_y=509&top_left_x=972)

第3级单元入线 (2-3级间链路) 忙闲状态表
表格显示不正常
$$
\begin{array}{|l|l|l|l|l|l|l|l|l|}
\hline  0 & & & & & & & & \\
\hline  1 & & & & & & & & \\
\hline  2 & & & & & & & & \\
\hline  3 & 0 & 0 & 1 & 1 & 0 & 1 & 0 & 1 \\
\hline 
\end{array}
$$

判断：第 1 级 0 \#交换单元的某入线 (时隙) 能否与第 3 级 3\#交换单元的某出线(时隙)建立起连接? 

二、程控交换机控制系统的硬件

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-05.jpg?height=1085&width=2460&top_left_y=830&top_left_x=232)



1 交换机控制系统的功能与特点

- 控制功能的分层:

低层控制(对硬件扫描和驱动)

$$ 高层㴏制(主要由软件实现)

- 具体控制功能包括:

$$ 接口状态的检测与分析处理;

网络路由选择与交换接续控制;

资源管理与调度;

$$ 故障诊断及处理。 

对控制系统的设计要求

- 可用性:

$$ 应具有一定的呼叫处理能力;

$$ 用忙时试呼次数 (BHCA) 来衡量。

- 实时性：

能实时处理用户呼叫或其它事件、快速建立或拆除连 接, 迅速执行任务。

- 可靠性:

$$ 系统具有容错能力, 可长期连续工作。

- 灵活性:

包括: 容量扩充(横向)、功能升级(纵向) 

程控交换机控制系统的特点

- 它是一个计算机实时控制系统。

- 与一般计算机系统的区别:

实时性要求高;

$1 / 0$ 接口种类多;

多处理机结构;

$CPU$ 一般应具有位操作或半字节操作功能。 

2 处理机的配置方式

- 为了提高呼叫处理能力和系统的可靠性, 程控交 换机一般采用多处理机结构。

- 处理机的配置方式决定了程控交换机的控制方式:

集中控制(适用于小型交换机)

- 畄处理或多处理机

$$ 分散控制 (适用于大中型交换机):

- 分级控制: 部分分散控制, 多处理机完成不同级别的控制功能

- 分布控制: 全分散控制，多个对等的处理机分工又合作 

三种控制方式

- 集中控制:

各处理机可执行所有功能, 按用户容量 (或工作负荷) 进行分工, 提高 工作效率, 同时互为备用, 提高系统可靠性。

- 分级控制 (部分分散控制):

不同级别的各处理机按功能 (或任务类别) 进行分工(如：外围处理机 、呼叫处理机、主处理机), 同一级各处理机按容量 (或负荷) 分担方 式工作。

- 分布控制(全分散控制):

各处理机可按容量 (负荷) 分担或者功能(任务类别)分担方式工作。 

荷兰飞利浦 SOPHO iS3070 交换机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-11.jpg?height=1439&width=2297&top_left_y=403&top_left_x=265)

《第四讲 电话呼叫处理原理 与程控交换机控制系统 》 

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-12.jpg?height=1410&width=2283&top_left_y=175&top_left_x=313)

分级控制方式 (三级控制)



上海贝尔 S-1240 交换机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-13.jpg?height=1552&width=2424&top_left_y=317&top_left_x=235)



瑞典爱立信 MD110 交换机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-14.jpg?height=1541&width=2223&top_left_y=311&top_left_x=324)



深圳华为 C\&CO8 程控交换机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-15.jpg?height=1578&width=1958&top_left_y=311&top_left_x=498)



处理机的冗余配置方式

- 同步方式:

两个处理机工作步调一致, 互为备用; 每执行完一条指令, 双机比 较结果, 若不一致, 则各自启动简单的自检程序, 若某台处理机确 有故障, 则退出服务, 作进一步的故障诊断与恢复处理。

- 负荷分担与互助方式：

$$ 各处理机平时各司其职, 分担话务处理; 出故障时互相帮助, 正常 机承担全部话务处理任务。

- 主/备用方式：

平时主用机工作, 备用机休息; 主用机出故障时, 备用机顶替工作 (即：主/备用机倒换)。

$$ 主/备用机的配备比例: $1: 1, n: 1$ 或 $n: m(m<n)$ 。

分为： 冷备用(不保存呼叫数据，)和热备用(保存呼叫数据)。 

多处理机间的通信方式

- 为了协调工作, 程控交换机的各处理机之间需要 相互通信。

- 多处理机之间的通信方式有多种, 如:

- 交换式通信: 通过数字交换网络传递信息

使用专用的控制信道

$$ 使用通用的语音信道

- 总线式通信:

采用多总线结构: 读写公共存储器或利用 $1 /$ 接口通信

采用计算机局域网 (LAN) 技术 

多处理机之间的交换式通信

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-18.jpg?height=958&width=1578&top_left_y=677&top_left_x=703)



多处理机之间总线式通信举例

处理机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-19.jpg?height=387&width=895&top_left_y=709&top_left_x=623)

处理机

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-19.jpg?height=489&width=999&top_left_y=1225&top_left_x=500)

处理机1

RAM存储器

处理机2

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-19.jpg?height=354&width=929&top_left_y=1315&top_left_x=1676)



处理机之间的通信协议

- 内部消息协议 (IMP) - SOPHO-S系列

- HDLC 协议 ，如: EIM-601局用交换机

- X.25 协议，如: 5ESS交换机

- 其它 (如基于7号信令系统协议) 

3 控制系统的电路结构

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-21.jpg?height=1365&width=2331&top_left_y=392&top_left_x=237)

第2讲 程控交换机的硬件技术 (授课：陈科文) 

控制系统的接口电路

- 输入/输出接口电路 ( $1 / 0$ 接口) 的设计与外部设 备和总线的特性有关

控制系统的外部设备: 包括交换机的各种外围接口电路、 交换模块和各种信令设备等。

不同CPU的总线结构、控制方式与传输时序等存在差异。

- 如何设计和选择I//接口驱动电路构成了控制系统 硬件设计的一个重要内容。 

信令设备

- 程控交换机控制系统还包括信令设备, 即专门的控制信号 收发设备。

- 信令设备:

在交换机之间或交换机与终端之间传输控制信号(信令)的设备, 包含相应的通信软硬件功能。

- 典型信令设备:

信号音发生器(采用模拟或数字电路生成)

DTMF (双音多频)收号器 (接收和识别拨号数字)

$$ MFC (多频互控)信令收发器 (记发器)

$$ No.7 信令终端: 作为7号信令系统 (SS7) 的端点 (信令点, SP) 

控制系统硬件小结

- 交换机控制系统硬件的设计应考虑下列因素:

$$ 系统控制方式: 决定系统结构。

$$ 处理机的配置: 数目、型号、主频、总线结构、处理机 间的通信方式等。

$I / 0$ 接口：类型、信号适配、通信标准等。

$$ 可靠性措施：系统容错(SFT)很重要。 

三、程控交换机控制系统的软件 ।

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-25.jpg?height=1089&width=2456&top_left_y=832&top_left_x=234)



1 程控交换机控制系统软件概述

- 工作软件或运行软件(联机程序、在线程序)

$$ 在交换机平时工作时运行或处理有关任务。

- 辅助支援软件 (脱机程序)

用于交换机的软件设计与测试、安装、调试和工程管理 与维护, 这些软件在交换机平时正常工作时不运行。 

程控交换机的工作软件

用户终端

(如：电话机)

 维护终端

(话务台或PC机)

$+\infty$

呼叫处理软件

运营管理维护软件 (OAM)

![](https://cdn.mathpix.com/cropped/2023_03_29_926cca5e54e69133124dg-27.jpg?height=112&width=254&top_left_y=940&top_left_x=1335)

系 统 执行管理程序 (操作系统核心)

系统监视和 故障处理程序 故障诊断 程序 人机通信和 I/O驱动程序

交换机话路部分

交换机控制部分(包括 I/O 设备)

程控交换机工作软件的组成



程控交换机工作软件的特点

1.实时性强

根据对实时性要求的不同，交换程序可分为不同等级:

(1)故障级，(2)周期期，(3)基本级。

2.多套程序并发运行

在同一时间执行多道程序。

3.可靠性要求高
(1) 冗余配置;
(2)故障诊断与处理。
\\mathrm\{([^{}]+)\} ?
4.适应能力强

$$ 具有通用性、可维护性；

参数化设计： 程序与数据分离。 

程控交换机的操作系统

- 程控交换机操作系统的特点:

$$ 实时操作系统 (RTOS)

$$ 支持多处理机之间的通信

$$ 管理两类外部设备: 通用外设(数据处理型设备)和专 用外设(话路与信令设备)

- 程控交换机操作系统的基本功能:

$$ 程序的执行管理, 涉及到：任务/作业管理、处理机/进 程管理、时间管理、存储器管理

设备管理、通信支持与分布处理、故障处理等。 

程控交换机的数据系统

- 程控交换系统的数据量庞大, 包括:

系统参数: 本交换局工作必备的数据

局数据: 与本局相连的网络交换设备和有关的中继路由 和电路的特征数据, 各类呼叫号码特征数据

用户数据: 反映用户、用户设备及业务的有关情况

- 大部分数据(如局数据和用户数据)主要提供给 呼叫处理程序进行呼叫分析处理, 并由OAM (操作 管理维护) 系统负责管理和维护, 目前主要采用数 据库技术来实现。


3.2 呼叫控制程序的设计方法

程控交换软件设计中一般要用到三类语言: \\ 1.规范描述语言 (SDL)

 用于系统设计(初步设计)阶段

2.各种高级语言和汇编语言

用于程序设计(详细设计)阶段

3.人机对话语言 (MML)

用于软件测试和运行维护阶段 

主控程序的设计

- 用SDL图描述呼叫处理进程

SDL: Specification Description Language(规范描述语言)

 SDL可在系统级、模块级和进程级等三个层次来描述交 换机软件系统。

SDL有两钟描述形式: 图形和文本

- 呼叫进程的处理流程可用SDL图形来描述。



![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-03.jpg?height=1857&width=2457&top_left_y=67&top_left_x=226)



有限状态机(FSM)模型

![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-04.jpg?height=1134&width=2163&top_left_y=649&top_left_x=474)

![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-04.jpg?height=71&width=1208&top_left_y=1814&top_left_x=888)



呼叫控制程序设计练习

- 尝试设计一个呼叫控制模拟程序:

【设计方法提示】：可根据呼叫处理流程(SDL图) 画出简化的呼叫状态转移图, 再采用FSM模型来设计 呼叫控制程序。



程序的分级与调度

- 根据实时性要求不同, 工作程序可分为三级:

1.故障级 (中断级)

- 根据故障的严重程度或影响可进一步分级

- 高级 (FH)、中级(FM)、低级(FL)

2.周期级 (时钟级)

- 根据周期的长短或紧迫性可进一步分级

- 高级 (CH)，低级 (CL)

3.基本级(进程级)

- 根据任务的重要性或影响面可进一步分级

- 高级 (BQ1), 中级 (BQ2) 、低级(BQ3) 

(1)周期级程序的调度

- 问题1:

假设有多个周期级程序, 其执行周期分别为: 10毫 秒、200毫秒、1秒、15秒，如何调度执行?



多级表调度法

![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-08.jpg?height=1156&width=1976&top_left_y=384&top_left_x=530)

执行周期:15s

基于多级表的周期级程序调度原理



周期级程序的调度

- 问题2:

假设有多个周期级程序, 其执行周期分别为：8毫 秒、16毫秒、96毫秒、96毫秒、96毫秒，仅用一个 定时/计数器, 该如何调度它们?



模拟 \\ 演示

(计数周期： 8 \mathrm{~ms} )?

(2)

时间表(空格代表 “O”)

屏蔽字

执行字 周期级程序

入口地址表

拨号脉冲识别程序

DTMF 收号程序

位间隔识别程序 2

用户群扫描程序 3

中继器扫描程序 4 

(2)基本级程序的调度

- 基本级程序的调度:

 大部分基本级程序在运行时构成 “进程” ;

 进程由操作系统来管理

- 进程状态: 等待、就绪、运行

- 进程控制块 PCB (进程描述)

- 进程通信(如:消息缓冲)

- 进程调度(如: 排队处理)

 进程调度算法 :

- 先进先出、时间片轮转、分优先级调度

- 通常采用优先级和先进先出相结合的调度法。 

(3)所有程序的启动控制过程

![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-12.jpg?height=1141&width=1593&top_left_y=586&top_left_x=531)



所有程序的启动控制过程
![](https://cdn.mathpix.com/cropped/2023_03_29_84c53e85d6505ded2e77g-13.jpg?height=1140&width=1804&top_left_y=604&top_left_x=617)

程序启动控制/调度的基本原则

- 高优先级的程序先执行, 可中断低优先级程序的执行;

- 同一优先级程序按顺序执行;

- 故障级程序由故障中断来启动, 不受任务调度的控制;

- 周期级程序采用时间表调度法来启动;

- 基本级程序若具有周期性, 可用时间表启动, 而大部分程 序采用队列法启动;

- 周期级与基本级程序间通过队列 (缓冲区) 来衔接。 

3 其它软件任务处理技术

- 实时处理 (Real time Processing)技术

 定期扫描

 多级中断

队列 + 超时限制

- 多重并发处理 (Multiple Processing)技术

 按优先顺序依次处理:

-依据任务性质、到达先后、处理时间/周期长短、影响面

 多道程序同时运行

- 进程 (Process) 或线程 (Thread) 

其它软件任务处理技术

- 群处理 (批处理)，可用于:

 用户摘挂机识别

 拨号脉冲和位间隔识别

 DTMF号码的接收

 中继线扫描监视

 中继线向模拟局转发脉冲的识别

- 多处理机并行处理

 按功能分担

 按负荷分担 

本讲小结

《第四讲 电话呼叫处理原理 与程控交换机控制系统 》 

重点: 呼叫处理原理

- 呯叫处理和接续控制是交换机控制系统的核心任务。

- 呼叫处理过程

 实际上是一个状态转移过程

注意理解各阶段交换机及话路设备的动作。

- 呯吅处理原理

 包括三种处理: 输入处理、分析处理、输出处理;

在呼叫的每一次状态转移过程中,一般都要执行这三种处理。

其中分析处理包括状态分析、去话分析、号码分析和来话分析 分别在呼叫处理的不同阶段进行。 

重点：呼叫处理原理(续)

- 呼叫处理程序具有 “实时性” 和 “并发性” 两个 基本特征。

- 呼叫处理程序设计方法:

 采用模块化设计, 并分为不同级别;

创建多个进程, 并采用 “有限状态机” 模型;

采用参数化设计，利用数据表格来控制执行流程。 

程控交换机的控制系统

- 控制系统的硬件

- 控制系统的软件





思考题

1.呼叫处理过程分为哪几个阶段? 在各个阶段, 程 控交换机分别要执行哪些处理或动作?

2.呼叫处理过程中的分析处理任务包括哪些方面?

3.简述号码分析的基本原理。

4.简述时间表调度周期级程序的原理。 

附加思考题

- “本局呼叫”和“出局呼叫”的处理存在哪些方 面的区别?

- 周期级程序怎样将数据 (如扫描获取的硬件状态 呼叫请求等) 传递给基本级程序进行处理? 

原理模拟演示程序设计练习 (不要求)

- 呼叫处理过程模拟演示程序的设计:

1.画出局内呼叫处理完整的SDL流程图

2.根据上面的SDL图, 画出简化的呼叫状态转移图 (只 有呼叫状态、转移条件和路径)

3.根据上图, 采用有限状态机 (FSM) 模型, 设计一个 呼叫处理过程图形模拟演示程序。

- 尝试编写基于时间表调度法的周期级任务调度模 拟演示程序。 

课前导学

- 下一讲预告:

电信网的信令系统、程控交换机的应用

- 思考以下有关问题:

1.信令系统在电信网中起什么作用?

2.信令分为哪几种类型?

3.7 号信令系统具有什么特点?

4.什么是智能网?

5.移动交换与固定交换有何异同? 
